<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Seçim Simülasyonu</title>
<style>
/* Body ve Container */
body {
    font-family: Arial, sans-serif;
    margin:0;
    min-height:100vh;
    display:flex;
    flex-direction:column;
    background: linear-gradient(to right, #a1c4fd, #c2e9fb);
}
.container {
    max-width:600px;
    margin:20px auto;
    background:white;
    border-radius:15px;
    box-shadow:0 10px 30px rgba(0,0,0,0.2);
    padding:25px;
}

/* Başlık */
h2 { text-align:center; margin-bottom:15px; }
.sehir-box {
    text-align:center;
    font-weight:bold;
    font-size:18px;
    margin-bottom:15px;
    padding:10px;
    background: linear-gradient(to right, #ffecd2, #fcb69f);
    border-radius:12px;
}

/* Inputlar ve Buton */
input[type=text], input[type=number] {
    width:85%;
    padding:8px;
    margin:6px 0;
    border-radius:8px;
    border:1px solid #ccc;
    font-size:16px;
}
button {
    background:#007bff;
    color:white;
    border:none;
    padding:10px 20px;
    border-radius:10px;
    cursor:pointer;
    margin:5px 5px;
    font-size:16px;
    transition:0.3s;
}
button:hover { background:#0056b3; }

/* Bar Grafikleri */
.barContainer {
    margin:10px 0;
    position:relative;
}
.bar {
    height:30px;
    border-radius:15px;
    background:#ccc;
    width:0%;
    transition: width 1s, transform 0.3s;
    color:white;
    font-weight:bold;
    line-height:30px;
    padding-right:10px;
    text-align:right;
}
.bar:hover { transform: scale(1.05); opacity:0.9; }

/* Tablo */
table {
    width:100%;
    border-collapse:collapse;
    margin-top:15px;
}
th, td { padding:8px; text-align:center; border:1px solid #ccc; }
th { background:#007bff; color:white; }

/* Sonuç */
#sonuc { margin-top:15px; font-weight:bold; text-align:center; font-size:18px; }

/* Footer */
footer {
    margin-top:auto;
    text-align:center;
    font-size:14px;
    color:#555;
    padding:15px 0;
    background:#e1e5ea;
    border-top:1px solid #ccc;
    width:100%;
}
@media(max-width:600px){
    .bar { font-size:14px; height:25px; line-height:25px; }
}
</style>
</head>
<body>
<div class="container">
    <h2>Dinamik Seçim Simülasyonu</h2>
    <input type="text" id="sehir" placeholder="Şehir / Ülke"><br>
    <input type="number" id="adaySayisi" placeholder="Aday Sayısı" min="2"><br>
    <button onclick="adaylariOlustur()">Adayları Oluştur</button>
    <button onclick="sifirla()">Sıfırla</button>
    <div id="adaylarDiv"></div>
    <div id="sonuc"></div>
</div>
<footer>© 2025 Seçim Simülasyonu Eren ERKAYA | Tüm Hakları Saklıdır</footer>

<script>
let adayInputs = [];

function adaylariOlustur(){
    let adaySayisi = Number(document.getElementById("adaySayisi").value);
    let adaylarDiv = document.getElementById("adaylarDiv");
    adaylarDiv.innerHTML="";
    adayInputs=[];

    if(adaySayisi<2){ alert("En az 2 aday olmalı."); return; }

    for(let i=0;i<adaySayisi;i++){
        let isimInput = document.createElement("input");
        isimInput.type="text";
        isimInput.placeholder="Aday "+(i+1)+" İsmi";
        isimInput.id="isim"+i;
        adaylarDiv.appendChild(isimInput);

        let oyInput = document.createElement("input");
        oyInput.type="number";
        oyInput.placeholder="Aday "+(i+1)+" Oy";
        oyInput.id="oy"+i;
        adaylarDiv.appendChild(oyInput);

        adayInputs.push({isimId:"isim"+i, oyId:"oy"+i});

        let barContainer = document.createElement("div");
        barContainer.className="barContainer";
        let bar = document.createElement("div");
        bar.className="bar";
        bar.id="bar"+i;
        barContainer.appendChild(bar);
        adaylarDiv.appendChild(barContainer);
    }

    let hesaplaBtn = document.createElement("button");
    hesaplaBtn.innerText="Hesapla";
    hesaplaBtn.onclick = hesapla;
    adaylarDiv.appendChild(hesaplaBtn);
}

function hesapla(){
    let toplam=0;
    let oylar=[];

    for(let a of adayInputs){
        let oy = Number(document.getElementById(a.oyId).value);
        if(oy<0) oy=0;
        oylar.push(oy);
        toplam+=oy;
    }

    if(toplam===0){ document.getElementById("sonuc").innerText="Lütfen oyları girin!"; return; }

    let sehir = document.getElementById("sehir").value || "Belirtilmemiş Şehir";
    document.getElementById("sonuc").innerHTML = `<div class="sehir-box">Seçim Şehri: ${sehir}</div>`;

    let maxOy=Math.max(...oylar);
    let kazananlar=[];

    // Barları ve tabloları güncelle
    let table = `<table><tr><th>Aday</th><th>Oy</th><th>Yüzde</th></tr>`;
    for(let i=0;i<adayInputs.length;i++){
        let isim=document.getElementById(adayInputs[i].isimId).value || "Aday "+(i+1);
        let yuzde=((oylar[i]/toplam)*100).toFixed(2);
        document.getElementById("bar"+i).style.width=yuzde+"%";
        document.getElementById("bar"+i).innerText=yuzde+"%";

        if(oylar[i]===maxOy) kazananlar.push(i);

        table += `<tr>
            <td>${isim}</td>
            <td>${oylar[i]}</td>
            <td>${yuzde}%</td>
        </tr>`;
    }
    table += "</table>";
    document.getElementById("sonuc").innerHTML += table;

    // Kazanan barı yeşil yap, diğerleri gri
    for(let i=0;i<adayInputs.length;i++){
        document.getElementById("bar"+i).style.backgroundColor = kazananlar.includes(i) ? "#28a745" : "#6c757d";
    }

    // Kazanan isimleri göster
    let kazananIsimleri = kazananlar.map(i=>document.getElementById(adayInputs[i].isimId).value || "Aday "+(i+1));
    document.getElementById("sonuc").innerHTML += `<div style="margin-top:10px; font-weight:bold; font-size:18px; text-align:center;">
        Kazanan: ${kazananIsimleri.join(", ")}
    </div>`;
}

function sifirla(){
    document.getElementById("sehir").value="";
    document.getElementById("adaySayisi").value="";
    document.getElementById("adaylarDiv").innerHTML="";
    document.getElementById("sonuc").innerHTML="";
}
</script>
</body>
</html>

