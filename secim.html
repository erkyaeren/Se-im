<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Seçim Simülasyonu</title>
<style>
body {
    font-family: Arial, sans-serif;
    background: linear-gradient(to right, #f0f2f5, #d9e2ec);
    display:flex;
    justify-content:center;
    align-items:flex-start;
    min-height:100vh;
    margin:0;
    padding:20px;
}
.container {
    background:white;
    padding:30px;
    border-radius:12px;
    box-shadow:0 5px 20px rgba(0,0,0,0.2);
    width:100%;
    max-width:500px;
}
h2 { text-align:center; margin-bottom:20px; }
input[type=text], input[type=number] {
    width:90%;
    padding:8px;
    margin:6px 0;
    border-radius:6px;
    border:1px solid #ccc;
    font-size:16px;
}
button {
    background:#007bff;
    color:white;
    border:none;
    padding:10px 20px;
    border-radius:8px;
    cursor:pointer;
    margin:10px 5px;
    font-size:16px;
    transition:0.3s;
}
button:hover { background:#0056b3; }
#adaylarDiv { margin-top:20px; }
.oyBar {
    height:25px;
    border-radius:12px;
    margin:6px 0;
    text-align:right;
    color:white;
    font-weight:bold;
    padding-right:6px;
    line-height:25px;
    transition: width 1s ease-in-out;
}
#sonuc {
    margin-top:15px;
    font-weight:bold;
    font-size:18px;
    text-align:center;
}
footer {
    text-align: center;
    font-size: 14px;
    color: #555;
    margin-top: auto;       /* boşluğu container’ın altına iter */
    padding: 15px 0;
    background: #e1e5ea;
    border-top: 1px solid #ccc;
    width: 100%;
}
</style>
</head>
<body>
<div class="container">
    <h2>Dinamik Seçim Simülasyonu</h2>

    <label>Şehir / Ülke Adı:</label><br>
    <input type="text" id="sehir" placeholder="Örn: Ankara"><br>

    <label>Aday Sayısı:</label><br>
    <input type="number" id="adaySayisi" placeholder="Örn: 3" min="2"><br>

    <button onclick="adaylariOlustur()">Adayları Oluştur</button>
    <button onclick="sifirla()">Sıfırla</button>

    <div id="adaylarDiv"></div>

    <div id="sonuc"></div>
</div>

<footer>© 2025 Seçim Simülasyonu Eren ERKAYA | Tüm Hakları Saklıdır</footer>

<script>
let adayInputs = [];

function adaylariOlustur() {
    let adaySayisi = Number(document.getElementById("adaySayisi").value);
    let adaylarDiv = document.getElementById("adaylarDiv");
    adaylarDiv.innerHTML = "";
    adayInputs = [];

    if(adaySayisi < 2) { alert("En az 2 aday olmalı."); return; }

    for(let i=0;i<adaySayisi;i++){
        let isimInput = document.createElement("input");
        isimInput.type = "text";
        isimInput.placeholder = "Aday " + (i+1) + " İsmi";
        isimInput.id = "isim"+i;
        adaylarDiv.appendChild(isimInput);

        let oyInput = document.createElement("input");
        oyInput.type = "number";
        oyInput.placeholder = "Aday " + (i+1) + " Oy";
        oyInput.id = "oy"+i;
        adaylarDiv.appendChild(oyInput);

        adayInputs.push({isimId:"isim"+i, oyId:"oy"+i});

        let bar = document.createElement("div");
        bar.className = "oyBar";
        bar.id = "bar"+i;
        bar.style.width="0%";
        bar.style.backgroundColor = `hsl(${i*60 % 360},70%,50%)`;
        adaylarDiv.appendChild(bar);

        adaylarDiv.appendChild(document.createElement("br"));
    }

    let hesaplaBtn = document.createElement("button");
    hesaplaBtn.innerText = "Hesapla";
    hesaplaBtn.onclick = hesapla;
    adaylarDiv.appendChild(hesaplaBtn);
}

function hesapla() {
    let toplam = 0;
    let oylar = [];

    for(let a of adayInputs){
        let oy = Number(document.getElementById(a.oyId).value);
        if(oy < 0) oy = 0;
        oylar.push(oy);
        toplam += oy;
    }

    if(toplam === 0){ document.getElementById("sonuc").innerText="Lütfen oyları girin!"; return; }

    let sonucMetin = "Seçim Şehri: " + document.getElementById("sehir").value + "\n\n";

    let maxOy = Math.max(...oylar);
    let kazananlar = [];

    for(let i=0;i<adayInputs.length;i++){
        let isim = document.getElementById(adayInputs[i].isimId).value || "Aday "+(i+1);
        let yuzde = ((oylar[i]/toplam)*100).toFixed(2);
        sonucMetin += isim + ": %" + yuzde + "\n";

        document.getElementById("bar"+i).style.width = yuzde + "%";
        document.getElementById("bar"+i).innerText = "%" + yuzde;

        if(oylar[i] === maxOy) kazananlar.push(isim);
    }

    sonucMetin += "\nKazanan: " + kazananlar.join(", ");
    document.getElementById("sonuc").innerText = sonucMetin;
}

function sifirla(){
    document.getElementById("sehir").value = "";
    document.getElementById("adaySayisi").value = "";
    document.getElementById("adaylarDiv").innerHTML = "";
    document.getElementById("sonuc").innerText = "";
}
</script>
</body>
</html>
